<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>êµ¬êµ¬ë‹¨ ì—°ìŠµ ê²Œì„ (ë‹¨ ì„ íƒ ê°€ëŠ¥)</title>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì´ˆê¸°í™” ë° í°íŠ¸ ì„¤ì • */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
            color: #333;
        }

        /* ê²Œì„ ì „ì²´ë¥¼ ê°ì‹¸ëŠ” ì»¨í…Œì´ë„ˆ */
        .container {
            background-color: white;
            padding: 30px 40px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 90%;
            max-width: 500px;
        }

        /* ì œëª© ìŠ¤íƒ€ì¼ */
        h1 {
            color: #2c3e50;
            margin-bottom: 20px;
        }

        /* [NEW] ë‹¨ ì„ íƒ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        #dan-selection-area {
            margin: 25px 0;
            padding: 20px;
            border: 1px solid #dfe6e9;
            border-radius: 10px;
            background-color: #fafafa;
        }
        #dan-selection-area legend {
            font-weight: bold;
            color: #34495e;
            padding: 0 10px;
            font-size: 1.1em;
        }
        #dan-checkboxes {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px 15px; /* ì„¸ë¡œ ê°„ê²©, ê°€ë¡œ ê°„ê²© */
            margin-top: 10px;
        }
        #dan-checkboxes label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        #dan-checkboxes label:hover {
            background-color: #ecf0f1;
        }
        #dan-checkboxes input {
            margin-right: 5px;
            /* ê¸°ë³¸ ì²´í¬ë°•ìŠ¤ ëª¨ì–‘ì„ ê¾¸ë¯¸ê¸° ìœ„í•´ ê°€ë” ì‚¬ìš©ë˜ë‚˜, í˜¸í™˜ì„±ì„ ìœ„í•´ ë‹¨ìˆœí•˜ê²Œ ë‘  */
            transform: scale(1.2); /* ì•½ê°„ í¬ê²Œ */
            cursor: pointer;
        }


        /* ë¬¸ì œ í‘œì‹œ ì˜ì—­ */
        #question-area {
            font-size: 3em;
            font-weight: bold;
            color: #3498db;
            margin: 25px 0;
            padding: 15px;
            background-color: #ecf0f1;
            border-radius: 10px;
            min-height: 65px; /* ë‚´ìš©ì´ ì—†ì–´ë„ ë†’ì´ ìœ ì§€ */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼ */
        #answer-input {
            width: 80%;
            padding: 15px;
            font-size: 1.5em;
            text-align: center;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            transition: border-color 0.3s;
        }
        #answer-input:focus {
            outline: none;
            border-color: #3498db;
        }
        #answer-input:disabled { /* ë¹„í™œì„±í™” ì‹œ ìŠ¤íƒ€ì¼ */
            background-color: #f8f9f9;
            cursor: not-allowed;
        }

        /* ë²„íŠ¼ ê³µí†µ ìŠ¤íƒ€ì¼ */
        button {
            padding: 12px 25px;
            font-size: 1.1em;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }
        button:hover {
            opacity: 0.9;
        }
        button:active {
            transform: scale(0.98);
        }
        button:disabled { /* ë¹„í™œì„±í™” ì‹œ ìŠ¤íƒ€ì¼ */
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        /* ì •ë‹µ í™•ì¸ ë²„íŠ¼ */
        #submit-btn {
            background-color: #2ecc71;
            color: white;
            margin-right: 10px;
        }
        
        /* ë‹¤ì‹œ ì‹œì‘ ë²„íŠ¼ */
        #reset-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        /* ê²°ê³¼ ë©”ì‹œì§€ ì˜ì—­ */
        #result-message {
            margin-top: 20px;
            font-size: 1.2em;
            font-weight: bold;
            min-height: 25px;
        }
        .correct { color: #27ae60; }
        .wrong { color: #c0392b; }

        /* ì ìˆ˜íŒ */
        #score-board {
            margin-top: 25px;
            font-size: 1.1em;
            color: #7f8c8d;
        }
        #score-board span {
            font-weight: bold;
            margin: 0 10px;
        }
        #correct-count { color: #2980b9; }
        #wrong-count { color: #e74c3c; }
    </style>
</head>
<body>

    <div class="container">
        <h1>êµ¬êµ¬ë‹¨ ì—°ìŠµ ê²Œì„</h1>
        <p>ì•„ë˜ì—ì„œ ì—°ìŠµí•  ë‹¨ì„ ì„ íƒí•˜ê³  ë¬¸ì œë¥¼ í’€ì–´ë³´ì„¸ìš”.</p>

        <!-- [NEW] ë‹¨ ì„ íƒ ì²´í¬ë°•ìŠ¤ ì˜ì—­ -->
        <fieldset id="dan-selection-area">
            <legend>ì—°ìŠµí•  ë‹¨ ì„ íƒ</legend>
            <div id="dan-checkboxes">
                <!-- JavaScriptë¡œ ì²´í¬ë°•ìŠ¤ ë™ì  ìƒì„± -->
            </div>
        </fieldset>

        <div id="question-area">? Ã— ?</div>

        <input type="number" id="answer-input" placeholder="ì •ë‹µ ì…ë ¥" autofocus>
        
        <div>
            <button id="submit-btn">ì •ë‹µ í™•ì¸</button>
            <button id="reset-btn">ë‹¤ì‹œ ì‹œì‘</button>
        </div>

        <p id="result-message"></p>

        <div id="score-board">
            <span>ë§íŒ ê°œìˆ˜: <span id="correct-count">0</span></span>
            <span>í‹€ë¦° ê°œìˆ˜: <span id="wrong-count">0</span></span>
        </div>
    </div>

    <script>
        // HTML ìš”ì†Œë“¤ì„ ë³€ìˆ˜ì— ì €ì¥
        const danCheckboxesContainer = document.getElementById('dan-checkboxes');
        const questionArea = document.getElementById('question-area');
        const answerInput = document.getElementById('answer-input');
        const submitBtn = document.getElementById('submit-btn');
        const resetBtn = document.getElementById('reset-btn');
        const resultMessage = document.getElementById('result-message');
        const correctCountSpan = document.getElementById('correct-count');
        const wrongCountSpan = document.getElementById('wrong-count');

        // ê²Œì„ ìƒíƒœë¥¼ ì €ì¥í•  ë³€ìˆ˜
        let num1, num2, correctAnswer;
        let correctCount = 0;
        let wrongCount = 0;

        // [NEW] ì²´í¬ë°•ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
        function createDanCheckboxes() {
            for (let i = 2; i <= 9; i++) {
                const label = document.createElement('label');
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.value = i;
                checkbox.checked = true; // ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë‘ ì„ íƒëœ ìƒíƒœë¡œ ì‹œì‘

                // ì²´í¬ë°•ìŠ¤ ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ìƒˆ ë¬¸ì œë¥¼ ì¦‰ì‹œ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ì´ë²¤íŠ¸ ì—°ê²°
                checkbox.addEventListener('change', generateQuestion);

                label.appendChild(checkbox);
                label.appendChild(document.createTextNode(` ${i}ë‹¨`));
                danCheckboxesContainer.appendChild(label);
            }
        }

        // [NEW] ì„ íƒëœ ë‹¨ ëª©ë¡ì„ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
        function getSelectedDans() {
            const checkedBoxes = document.querySelectorAll('#dan-checkboxes input:checked');
            const selectedDans = [];
            checkedBoxes.forEach(box => {
                selectedDans.push(parseInt(box.value, 10));
            });
            return selectedDans;
        }

        // [UPDATED] ìƒˆë¡œìš´ êµ¬êµ¬ë‹¨ ë¬¸ì œë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
        function generateQuestion() {
            // ì„ íƒëœ ë‹¨ ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
            const selectedDans = getSelectedDans();

            // ë§Œì•½ ì„ íƒëœ ë‹¨ì´ í•˜ë‚˜ë„ ì—†ë‹¤ë©´
            if (selectedDans.length === 0) {
                questionArea.textContent = 'ì—°ìŠµí•  ë‹¨ì„ ì„ íƒí•´ì£¼ì„¸ìš”!';
                answerInput.value = '';
                answerInput.disabled = true; // ì…ë ¥ í•„ë“œ ë¹„í™œì„±í™”
                submitBtn.disabled = true;   // í™•ì¸ ë²„íŠ¼ ë¹„í™œì„±í™”
                resultMessage.textContent = '';
                return;
            }

            // ë¹„í™œì„±í™”ëœ ìš”ì†Œë“¤ì„ ë‹¤ì‹œ í™œì„±í™”
            answerInput.disabled = false;
            submitBtn.disabled = false;

            // ì„ íƒëœ ë‹¨ ì¤‘ì—ì„œ í•˜ë‚˜ë¥¼ ë¬´ì‘ìœ„ë¡œ ì„ íƒ
            num1 = selectedDans[Math.floor(Math.random() * selectedDans.length)];
            // ê³±í•˜ëŠ” ìˆ˜ëŠ” 2~9 ì‚¬ì´ì˜ ë‚œìˆ˜
            num2 = Math.floor(Math.random() * 8) + 2;
            correctAnswer = num1 * num2;

            // í™”ë©´ì— ë¬¸ì œ í‘œì‹œ
            questionArea.textContent = `${num1} Ã— ${num2}`;
            
            // ì´ì „ ê²°ê³¼ ì´ˆê¸°í™”
            resultMessage.textContent = '';
            resultMessage.className = '';
            answerInput.value = '';
            answerInput.focus();
        }

        // ì •ë‹µì„ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
        function checkAnswer() {
            const userAnswer = parseInt(answerInput.value, 10);

            if (isNaN(userAnswer)) {
                resultMessage.textContent = 'ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!';
                resultMessage.className = 'wrong';
                return;
            }

            if (userAnswer === correctAnswer) {
                resultMessage.textContent = 'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰';
                resultMessage.className = 'correct';
                correctCount++;
                correctCountSpan.textContent = correctCount;
            } else {
                resultMessage.textContent = `í‹€ë ¸ìŠµë‹ˆë‹¤. ì •ë‹µì€ ${correctAnswer} ì…ë‹ˆë‹¤. ğŸ˜­`;
                resultMessage.className = 'wrong';
                wrongCount++;
                wrongCountSpan.textContent = wrongCount;
            }
            
            setTimeout(generateQuestion, 1500);
        }

        // ê²Œì„ì„ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜
        function resetGame() {
            correctCount = 0;
            wrongCount = 0;
            correctCountSpan.textContent = correctCount;
            wrongCountSpan.textContent = wrongCount;
            generateQuestion();
        }

        // ì´ˆê¸°í™” í•¨ìˆ˜
        function init() {
            createDanCheckboxes(); // ì²´í¬ë°•ìŠ¤ ë™ì  ìƒì„±
            generateQuestion();    // ì²« ë¬¸ì œ ìƒì„±
        }
        
        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        submitBtn.addEventListener('click', checkAnswer);
        resetBtn.addEventListener('click', resetGame);
        answerInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                checkAnswer();
            }
        });

        // í˜ì´ì§€ê°€ ì²˜ìŒ ë¡œë“œë  ë•Œ ê²Œì„ ì´ˆê¸°í™” í•¨ìˆ˜ ì‹¤í–‰
        window.onload = init;

    </script>
</body>
</html>